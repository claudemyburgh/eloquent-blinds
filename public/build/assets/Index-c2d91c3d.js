import{h as W,q as u,d as k,j as e,e as c,F as x,l as j,k as w,W as H,i as Y}from"./index.esm-7e288f01.js";import{i as J,_ as K,a as X,b as Z,c as I,d as ee,e as P,f as ae,u as b,A as re}from"./AuthenticatedLayout-6f53ec74.js";import"./prototypes-b1fda430.js";import{D as te}from"./DangerButton-6a0aad80.js";import{P as S}from"./PrimaryButton-0cec20dc.js";import{S as le,M as ne}from"./Modal-321e8a42.js";import{c as N,u as $,s as se}from"./helpers-4f89d69e.js";import{_ as T}from"./index-0ee53222.js";import{T as V}from"./ToastItem-1439baca.js";import{D as ce}from"./Datatable-4ed4daaa.js";import{C as G}from"./Checkbox-46901fd8.js";import"./Dropdown-c8bbabc6.js";import{T as B,S as M}from"./Textarea-82c98a4b.js";import{P as q}from"./Panel-26424cc9.js";import{s as ie}from"./slugify-05cdbe72.js";import{t as U}from"./transition-d4d33e78.js";import{I as oe}from"./InputError-ca9eea04.js";import{I as y}from"./InputLabel-8c091354.js";import{S as de}from"./SelectCategory-1d0229fa.js";import"./app-3330a062.js";import"./ApplicationLogo-e80fc51b.js";import"./theme-script-fbbf9cf9.js";import"./ThemeSelector-34b2c170.js";import"./keyboard-ec40ae2d.js";import"./use-root-containers-a4d6e28f.js";function me(r,a){var t=r.length;for(r.sort(a);t--;)r[t]=r[t].value;return r}var pe=me,O=J;function ue(r,a){if(r!==a){var t=r!==void 0,l=r===null,s=r===r,n=O(r),i=a!==void 0,o=a===null,p=a===a,d=O(a);if(!o&&!d&&!n&&r>a||n&&i&&p&&!o&&!d||l&&i&&p||!t&&p||!s)return 1;if(!l&&!n&&!d&&r<a||d&&t&&s&&!l&&!n||o&&t&&s||!i&&s||!p)return-1}return 0}var he=ue,ge=he;function fe(r,a,t){for(var l=-1,s=r.criteria,n=a.criteria,i=s.length,o=t.length;++l<i;){var p=ge(s[l],n[l]);if(p){if(l>=o)return p;var d=t[l];return p*(d=="desc"?-1:1)}}return r.index-a.index}var ve=fe,D=K,be=X,ye=ae,xe=Z,we=pe,Ne=I,ke=ve,Se=ee,Ce=P;function _e(r,a,t){a.length?a=D(a,function(n){return Ce(n)?function(i){return be(i,n.length===1?n[0]:n)}:n}):a=[Se];var l=-1;a=D(a,Ne(ye));var s=xe(r,function(n,i,o){var p=D(a,function(d){return d(n)});return{criteria:p,index:++l,value:n}});return we(s,function(n,i){return ke(n,i,t)})}var Ae=_e,De=Ae,E=P;function Me(r,a,t,l){return r==null?[]:(E(a)||(a=a==null?[]:[a]),t=l?void 0:t,E(t)||(t=t==null?[]:[t]),De(r,a,t))}var $e=Me;const Be=W($e),Fe=({data:r,categories_all:a})=>{const{url:t}=u(),[l,s]=k.useState(!1),{quickSearch:n,setQuickSearch:i,order:o,setOrder:p,setFilteredData:d,filteredData:C,selected:g,setSelected:_}=b(),A=()=>{let h;return h=r.records.data,h=h.filter(v=>Object.keys(v).some(f=>String(v[f]).toLowerCase().indexOf(n.toLowerCase())>-1)),h=Be(h,v=>{let f=v[o.key];return isNaN(parseFloat(f))?String(f).toLowerCase():parseFloat(f)},o.order),h};k.useEffect(()=>{d(A())},[o,n]);const F=()=>{s(!1),j.delete(`${N(t)}/${g}`,{preserveState:!1,onSuccess:()=>{_([]),T.custom(h=>e(V,{t:h,type:"success",title:"Success",message:"Deleted successfully",icon:"check"}))}})};return e("div",{children:c("div",{className:"pb-12",children:[e(je,{categories:a}),r.meta.allow.searching&&e(Pe,{}),g.length>0&&e("div",{className:"flex mb-4 space-x-8",children:e(qe,{children:l?c(x,{children:[c("span",{children:["Are you sure you want to delete"," ",g.length," ",g.length>1?r.meta.name:r.meta.name_singular," ","?"]}),e(S,{onClick:F,children:"Yes"}),e(le,{onClick:()=>s(!1),children:"Cancel"})]}):e(te,{onClick:()=>s(!0),children:"Delete"})})}),c(ce,{children:[e(Le,{}),e(Oe,{})]}),e(Ee,{})]})})},Le=()=>{var n;const{order:r,selected:a,handleToggleSelectedAll:t,handleColumnOrder:l}=b(),{data:s}=u().props;return e("thead",{className:"bg-gray-200 dark:bg-gray-950/20 border-b border-gray-400/800 dark:border-gray-900 text-gray-700 dark:text-gray-200",children:c("tr",{children:[s.meta.allow.deletions&&e("th",{className:"p-3.5 w-5",children:e(G,{checked:a.length>0,onChange:i=>t(i,s.records.data)})}),(n=s.columns.displayable)==null?void 0:n.map(i=>e("th",{className:`p-3.5 text-left text-sm font-semibold dark:text-gray-200 text-gray-900 uppercase ${i==="id"&&"w-[70px]"}`,scope:"col",children:c("button",{type:"button",className:"flex space-x-2 justify-between items-center uppercase",onClick:()=>l(i),children:[e("span",{children:$(i)}),r.key===i&&e(He,{order:r.order})]})},i)),e("th",{className:"w-[70px] text-right p-3.5",children:e("span",{className:"sr-only",children:"Edit or delete"})})]})})},ze=({id:r,deletion:a,name:t})=>{const{url:l}=u(),[s,n]=k.useState(!1);return e("div",{className:"flex space-x-5 relative items-center",children:s?c("div",{className:"flex space-x-1",children:[e(w,{preserveScroll:!0,preserveState:!1,method:"delete",onSuccess:()=>{T.custom(i=>e(V,{t:i,type:"success",title:"Success",message:"Deleted successfully",icon:"check"}))},href:`${N(l)}/${r}`,as:"button",className:"text-green-500 bg-gray-900/75 p-1 rounded ",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"})})}),e("button",{className:"text-red-500 bg-gray-900/75 p-1 rounded",type:"button",onClick:i=>n(!s),children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]}):c(x,{children:[a&&e("button",{type:"button",onClick:i=>n(!s),children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-rose-600",children:e("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})}),t==="messages"?c(w,{className:"flex items-center text-xs space-x-2 bg-primary-600 text-white px-2 py-1 rounded",type:"button",href:`${N(l)}/${r}`,children:[e("span",{children:"View"}),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-gray-400",children:[e("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})]}):e(w,{type:"button",href:`${N(l)}/${r}/edit`,children:c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-gray-400",children:[e("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})})]})})},qe=({children:r})=>e("div",{className:"flex space-x-4",children:r}),Oe=()=>{const{data:{columns:r,meta:a}}=u().props,{filteredData:t,handleSelected:l,selected:s}=b();return e("tbody",{className:"divide-y divide-gray-300 dark:divide-gray-900",children:t&&t.map((n,i)=>c("tr",{className:"odd:bg-gray-100 odd:dark:bg-gray-800",children:[a.allow.deletions&&e("td",{className:"p-3.5 w-5",children:e(G,{id:n.id,onChange:l,value:n.id,checked:s.includes(n.id)})}),r.displayable.map(o=>e("td",{className:"max-w-[200px] px-3.5 py-4 text-sm text-gray-700 dark:text-gray-300",children:e("div",{className:"line-clamp-2",children:o!=="read_at"?n[o]:e("div",{className:U("inline-block px-3 py-0.5 text-xs rounded-full",n[o]!==null?"bg-green-100 text-green-600 border-green-600 border dark:bg-green-800 dark:text-green-200 dark:border-green-900":"bg-rose-100 text-rose-600 border-rose-600 border dark:bg-rose-800 dark:text-rose-200 dark:border-rose-900"),children:n[o]!==null?n[o]:"Unread"})})},`${o}-${i}`)),e("th",{className:"w-[70px] text-right px-3.5 py-4 text-sm",children:e(ze,{id:n.id,deletion:a.allow.deletions,name:a.name})})]},`row-${i}`))})},Ee=()=>{const{data:{records:r}}=u().props,{limit:a}=b();return e(x,{children:r.links.length>3&&e("nav",{className:"relative space-x-1 z-0 my-4 md:my-6 flex justify-center shadow-sm -space-x-px","aria-label":"Pagination",children:r==null?void 0:r.links.map((t,l)=>e(w,{preserveScroll:!1,method:"get",href:t.url||"",disabled:t.active||!t.url,as:"button",data:{limit:a},className:U("z-10 relative inline-flex items-center px-4 py-2 hover:bg-gray-200 text-sm font-medium  disabled:cursor-not-allowed rounded mb-5",t.active?" bg-primary-500":"bg-gray-100 text-gray-700 dark:bg-gray-800 dark:text-gray-100"),dangerouslySetInnerHTML:{__html:t.label}},l.toString()))})})},je=({categories:r})=>{const{data:{meta:{name_singular:a,name:t,allow:l},columns:s,database:n}}=u().props,{url:i}=u(),[o,p]=k.useState(!1),d=s.quick_create,C={};d.forEach(m=>{C[m]=""});const{data:g,setData:_,post:A,processing:F,errors:h,clearErrors:v,reset:f}=H({...C});function L(){p(!1),f(),v()}function Q(){p(!0)}const z=m=>{m.preventDefault(),_({...g,[m.target.name]:m.target.name==="slug"?se(m.target.value):m.target.value})},R=m=>{m.preventDefault(),v(),A(`${i}`,{onSuccess:()=>{L(),f()},onError:()=>{},preserveState:!0})};return c(x,{children:[e(ne,{show:o,onClose:L,maxWidth:"lg",closeable:!0,children:c(q,{children:[e(q.Header,{heading:`Create a new ${a}`}),c("form",{onSubmit:R,className:"mt-4 space-y-6",children:[s.quick_create.map(m=>c("div",{children:[e(y,{htmlFor:m,value:$(m),className:"capitalize"}),m==="category_id"?e(de,{id:"category_id",name:m,categories:r,defaultValue:g.category_id,onChange:z}):e(B,{id:m,name:m,className:"mt-1 block w-full",onChange:z,value:g[m]}),e(oe,{className:"mt-2",message:h[m]})]},ie(m))),e("div",{children:e(S,{type:"submit",children:"Create"})})]})]})}),e("div",{className:"wrapper py-4 rounded my-4 md:my-6 bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-800 text-gray-700 dark:text-gray-200",children:c("div",{className:"flex justify-between",children:[e("h1",{className:"capitalize font-semibold text-2xl",children:t}),l.creation&&c(S,{type:"button",onClick:Q,children:["Create new ",a]})]})})]})},He=({order:r})=>e("div",{className:`pointer-events-none ${r==="asc"?"rotate-0":"rotate-180"}`,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 ",children:e("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})}),Pe=()=>{u();const{quickSearch:r,setQuickSearch:a}=b();return c("div",{className:"bg-gray-200 dark:bg-gray-800 border border-gray-300 dark:border-gray-800 text-gray-700 dark:text-gray-200 p-4 rounded my-4 md:my-6 space-y-4",children:[e(Ve,{}),c("div",{className:"grid grid-cols-12 gap-4 md:gap-x-6 lg:gap-x-8",children:[c("div",{className:"col-span-12 md:col-span-8 lg:col-span-10",children:[e(y,{className:"mb-1",htmlFor:"quick-search",children:"Quick Search"}),e(B,{type:"search",id:"quick-search",className:"w-full max-w-full",onChange:l=>{l.preventDefault(),a(l.target.value)},value:r})]}),e("div",{className:"col-span-12 md:col-span-4 lg:col-span-2",children:e(Te,{})})]})]})},Te=()=>{const{url:r}=u(),{limit:a,setLimit:t}=b();return c(x,{children:[e(y,{className:"mb-1",htmlFor:"display-limit",children:"Display Limit"}),c(M,{onChange:s=>{t(s.target.value),j.get(`${r}`,{limit:s.target.value},{preserveState:!1})},id:"display-limit",name:"limit",className:"w-full max-w-full",value:a,children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"}),e("option",{value:"100",children:"100"}),e("option",{value:"250",children:"250"})]})]})},Ve=()=>{const{url:r}=u(),{data:{columns:a}}=u().props,{limit:t}=b(),{data:l,setData:s,get:n,errors:i}=H({column:"id",operator:"equals",limit:t,value:""}),o=d=>{s({...l,[d.target.id]:d.target.value})};return c("form",{className:"grid grid-cols-12 gap-4 md:gap-x-6 lg:gap-x-8",onSubmit:d=>{d.preventDefault(),n(`${r}`,{preserveState:!1})},children:[c("div",{className:"col-span-12 md:col-span-6 lg:col-span-2",children:[e(y,{className:"mb-1",htmlFor:"column",children:"Filter column"}),e(M,{id:"column",className:"w-full max-w-full",value:l.column,onChange:o,children:a.updatable.map(d=>e("option",{value:d,children:$(d)},d))})]}),c("div",{className:"col-span-12 md:col-span-6 lg:col-span-2",children:[e(y,{className:"mb-1",htmlFor:"operator",children:"Operator"}),c(M,{id:"operator",className:"w-full max-w-full",value:l.operator,onChange:o,children:[e("option",{value:"equals",children:"Equals"}),e("option",{value:"contains",children:"Contains"}),e("option",{value:"starts_with",children:"Starts with"}),e("option",{value:"ends_with",children:"Ends with"}),e("option",{value:"greater_than",children:"Greater than"}),e("option",{value:"greater_or_equal_than",children:"Greater or equal than"}),e("option",{value:"less_than",children:"Less than"}),e("option",{value:"less_or_equal_than",children:"Less or equal than"})]})]}),c("div",{className:"col-span-12 md:col-span-8 flex flex-grow-0",children:[c("div",{className:"flex-1",children:[e(y,{className:"mb-1",htmlFor:"value",children:"Full Search"}),e(B,{type:"search",id:"value",className:"w-full max-w-full rounded-r-none",value:l.value,onChange:o})]}),e("div",{className:"flex items-end",children:e(S,{type:"submit",className:"min-h-[42px] rounded-l-none",children:"Search"})})]})]})},ha=({auth:r,data:a,categories_all:t})=>{var l,s;return c(re,{user:r.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight capitalize",children:(l=a==null?void 0:a.meta)==null?void 0:l.name}),children:[e(Y,{title:`Dashboard ${(s=a==null?void 0:a.meta)==null?void 0:s.name.capitalize()}`}),e("div",{className:"py-12",children:e("div",{className:"wrapper text-white",children:e(Fe,{data:a,categories_all:t})})})]})};export{ha as default};
