import{r as v,a as t,F as D,j as l,g as I,d as T}from"./app-00e8e10d.js";import{t as $}from"./AuthenticatedLayout-46e75307.js";import"./prototypes-fee88381.js";var z=$,E=0;function O(e){var a=++E;return z(e)+a}var P=O;const K=({model:e,namedRoute:a})=>{const[s,i]=v.useState(!1),[x,g]=v.useState(null),[p,n]=v.useState({loaded:0,total:0,progress:0,bytes:0,rate:0,estimate:0,event:{isTrusted:!0},upload:!1,percentage:0}),m=[];function u(r){r.preventDefault(),i(!0)}function h(r){r.preventDefault(),i(!0)}function b(r){r.preventDefault(),i(!0)}function S(r){r.preventDefault(),i(!1)}function B(r){let d=m.push({id:P(),file:r,progress:0,failed:!1,loadedBytes:0,totalBytes:0,timeStarted:new Date().getTime(),secondsRemaining:0,finished:!1,cancelled:!1,xhr:null})-1;return m[d]}function F(r){r.preventDefault(),i(!1),g(r.dataTransfer.files),y(r.dataTransfer.files)}function j(r){g(r.target.files),y(r.target.files)}function y(r){let d,c;for(d=0;d<r.length;d++)c=r[d],k(c)}function k(r){let d=B(r);const c=new FormData;c.append("id",e.id),c.append("image",d.file),I.post(route(a,e),c,{forceFormData:!1,preserveState:!0,headers:{"content-type":"multipart/form-data"},onProgress:C=>{n({...p,...C})},onSuccess:()=>{setTimeout(()=>{n({loaded:0,total:0,progress:0,bytes:0,rate:0,estimate:0,event:{isTrusted:!0},upload:!1,percentage:0})},1e3)}})}return t(D,{children:l("div",{children:[l("div",{className:`relative transition my-6 border border-dashed border-gray-200 min-h-[160px] rounded-lg text-gray-200
                ${s?"opacity-100 border-primary-500 shadow-lg shadow-primary-700/10 cursor-grabbing":"opacity-70 border-gray-200"}
                `,onDrag:u,onDrop:F,onDragOver:b,onDragLeave:S,onDragEnter:h,children:[l("label",{htmlFor:"image",className:`absolute inset-0 flex items-center justify-center rounded-lg flex-col space-y-2 tracking-wide
                        ${s?" cursor-grabbing":"cursor-pointer"}
                    `,children:[t("span",{children:t("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-12 h-12",children:t("path",{fillRule:"evenodd",d:"M5.5 17a4.5 4.5 0 01-1.44-8.765 4.5 4.5 0 018.302-3.046 3.5 3.5 0 014.504 4.272A4 4 0 0115 17H5.5zm3.75-2.75a.75.75 0 001.5 0V9.66l1.95 2.1a.75.75 0 101.1-1.02l-3.25-3.5a.75.75 0 00-1.1 0l-3.25 3.5a.75.75 0 101.1 1.02l1.95-2.1v4.59z",clipRule:"evenodd"})})}),l("span",{children:[t("strong",{children:"Drop file to upload"})," or"," ",t("u",{children:"click to select"})]})]}),t("input",{onChange:j,className:"sr-only",type:"file",multiple:!0,name:"image[]",id:"image"})]}),t(M,{percentage:p.percentage}),(e==null?void 0:e.media)&&t("div",{className:"grid gap-4 md:gap-6 lg:gap-8 grid-cols-1 md:grid-cols-2 lg:grid-cols-1 xl:grid-cols-2",children:e.media.map(r=>t(V,{file:r},r.uuid))})]})})},M=({percentage:e})=>t(D,{children:e>0&&l("div",{className:"w-full bg-gray-200 rounded-full dark:bg-gray-700 h-6 my-4 relative overflow-hidden",children:[t("div",{className:"relative bg-primary-500 -left-full transition text-xs font-medium text-primary-100 text-center h-6 leading-none rounded-full",style:{transform:`translateX(${e}%)`}}),l("div",{className:"absolute flex items-center justify-center inset-0 z-10 text-center",children:[e,"%"]})]})});var f={},R={get exports(){return f},set exports(e){f=e}};/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */R.exports=U;f.format=w;f.parse=N;var L=/\B(?=(\d{3})+(?!\d))/g,q=/(?:\.0*|(\.[^0]+)0+)$/,o={b:1,kb:1<<10,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},_=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function U(e,a){return typeof e=="string"?N(e):typeof e=="number"?w(e,a):null}function w(e,a){if(!Number.isFinite(e))return null;var s=Math.abs(e),i=a&&a.thousandsSeparator||"",x=a&&a.unitSeparator||"",g=a&&a.decimalPlaces!==void 0?a.decimalPlaces:2,p=!!(a&&a.fixedDecimals),n=a&&a.unit||"";(!n||!o[n.toLowerCase()])&&(s>=o.pb?n="PB":s>=o.tb?n="TB":s>=o.gb?n="GB":s>=o.mb?n="MB":s>=o.kb?n="KB":n="B");var m=e/o[n.toLowerCase()],u=m.toFixed(g);return p||(u=u.replace(q,"$1")),i&&(u=u.split(".").map(function(h,b){return b===0?h.replace(L,i):h}).join(".")),u+x+n}function N(e){if(typeof e=="number"&&!isNaN(e))return e;if(typeof e!="string")return null;var a=_.exec(e),s,i="b";return a?(s=parseFloat(a[1]),i=a[4].toLowerCase()):(s=parseInt(e,10),i="b"),isNaN(s)?null:Math.floor(o[i]*s)}const V=({file:e,...a})=>t("div",{...a,className:"bg-gray-800 border border-gray-700 rounded-xl p-2",children:l("div",{className:"flex space-x-2.5",children:[t("div",{className:"h-14 w-14 rounded bg-black flex-shrink-0",children:t("img",{className:"aspect-square rounded",src:e.original_url,alt:e.name})}),l("div",{className:"flex-shrink flex-col flex items-start justify-center text-xs",children:[t("div",{children:e.name}),l("div",{children:["Size: ",e.size]}),t("div",{children:`Size: ${f.format(e.size,{thousandsSeparator:" "})} `}),t(T,{as:"button",method:"delete",className:"underline hover:text-white text-primary-500",href:route("dashboard.media.delete",e.uuid),children:"Delete"})]})]})});export{K as I};
