import{q as h,r as w,a as e,j as c,F as x,g as j,d as D,W as P,b as R}from"./app-0f685b2d.js";import{i as W,_ as Y,a as J,b as K,c as X,d as Z,e as H,f as I,u as b,A as ee}from"./AuthenticatedLayout-d005dba9.js";import{D as ae}from"./DangerButton-5233cb0b.js";import{P as N}from"./PrimaryButton-f36752c7.js";import{S as te,M as re}from"./Modal-c1a99a13.js";import{c as A,u as M,s as le}from"./helpers-994f4b70.js";import{_ as T}from"./index-db8c2bec.js";import{T as G}from"./ToastItem-a53dd60f.js";import{D as ne}from"./Datatable-cf3f3c8d.js";import{C as V}from"./Checkbox-7eba9eda.js";import"./Dropdown-423332c2.js";import{T as B,S as $}from"./SaveSubmitButton-04f1a370.js";import{P as q}from"./Panel-1708885a.js";import{s as se}from"./slugify-a8a4adc7.js";import{I as ce}from"./InputError-5db140db.js";import{I as y}from"./InputLabel-434bdfe3.js";import{S as ie}from"./SelectCategory-9849aeb8.js";import"./prototypes-fee88381.js";import"./ApplicationLogo-6099ca09.js";function oe(a,t){var r=a.length;for(a.sort(t);r--;)a[r]=a[r].value;return a}var de=oe,O=W;function me(a,t){if(a!==t){var r=a!==void 0,l=a===null,s=a===a,n=O(a),i=t!==void 0,d=t===null,u=t===t,o=O(t);if(!d&&!o&&!n&&a>t||n&&i&&u&&!d&&!o||l&&i&&u||!r&&u||!s)return 1;if(!l&&!n&&!o&&a<t||o&&r&&s&&!l&&!n||d&&r&&s||!i&&s||!u)return-1}return 0}var ue=me,he=ue;function pe(a,t,r){for(var l=-1,s=a.criteria,n=t.criteria,i=s.length,d=r.length;++l<i;){var u=he(s[l],n[l]);if(u){if(l>=d)return u;var o=r[l];return u*(o=="desc"?-1:1)}}return a.index-t.index}var ge=pe,k=Y,fe=J,ve=I,be=K,ye=de,xe=X,we=ge,Ne=Z,Se=H;function Ce(a,t,r){t.length?t=k(t,function(n){return Se(n)?function(i){return fe(i,n.length===1?n[0]:n)}:n}):t=[Ne];var l=-1;t=k(t,xe(ve));var s=be(a,function(n,i,d){var u=k(t,function(o){return o(n)});return{criteria:u,index:++l,value:n}});return ye(s,function(n,i){return we(n,i,r)})}var _e=Ce,ke=_e,E=H;function De(a,t,r,l){return a==null?[]:(E(t)||(t=t==null?[]:[t]),r=l?void 0:r,E(r)||(r=r==null?[]:[r]),ke(a,t,r))}var Ae=De;const $e=({data:a,categories_all:t})=>{const{url:r}=h(),[l,s]=w.useState(!1),{quickSearch:n,setQuickSearch:i,order:d,setOrder:u,setFilteredData:o,filteredData:S,selected:g,setSelected:C}=b(),_=()=>{let p;return p=a.records.data,p=p.filter(v=>Object.keys(v).some(f=>String(v[f]).toLowerCase().indexOf(n.toLowerCase())>-1)),p=Ae(p,v=>{let f=v[d.key];return isNaN(parseFloat(f))?String(f).toLowerCase():parseFloat(f)},d.order),p};w.useEffect(()=>{o(_())},[d,n]);const L=()=>{s(!1),j.delete(`${A(r)}/${g}`,{preserveState:!1,onSuccess:()=>{C([]),T.custom(p=>e(G,{t:p,type:"success",title:"Success",message:"Deleted successfully",icon:"check"}))}})};return e("div",{children:c("div",{className:"pb-12",children:[e(qe,{categories:t}),a.meta.allow.searching&&e(Ee,{}),g.length>0&&e("div",{className:"flex mb-4 space-x-8",children:e(Le,{children:l?c(x,{children:[c("span",{children:["Are you sure you want to delete"," ",g.length," ",g.length>1?a.meta.name:a.meta.name_singular," ","?"]}),e(N,{onClick:L,children:"Yes"}),e(te,{onClick:()=>s(!1),children:"Cancel"})]}):e(ae,{onClick:()=>s(!0),children:"Delete"})})}),c(ne,{children:[e(Me,{}),e(Fe,{})]}),e(ze,{})]})})},Me=()=>{var n;const{order:a,selected:t,handleToggleSelectedAll:r,handleColumnOrder:l}=b(),{data:s}=h().props;return e("thead",{className:"bg-gray-900/75",children:c("tr",{children:[s.meta.allow.deletions&&e("th",{className:"p-3.5 w-5",children:e(V,{checked:t.length>0,onChange:i=>r(i,s.records.data)})}),(n=s.columns.displayable)==null?void 0:n.map(i=>e("th",{className:`p-3.5 text-left text-sm font-semibold text-gray-100 uppercase ${i==="id"&&"w-[70px]"}`,scope:"col",children:c("button",{type:"button",className:"flex space-x-2 justify-between items-center uppercase",onClick:()=>l(i),children:[e("span",{children:M(i)}),a.key===i&&e(Oe,{order:a.order})]})},i)),e("th",{className:"w-[70px] text-right p-3.5",children:e("span",{className:"sr-only",children:"Edit or delete"})})]})})},Be=({id:a,deletion:t})=>{const{url:r}=h(),[l,s]=w.useState(!1);return e("div",{className:"flex space-x-5 relative items-center",children:l?c("div",{className:"flex space-x-1",children:[e(D,{preserveScroll:!0,preserveState:!1,method:"delete",onSuccess:()=>{T.custom(n=>e(G,{t:n,type:"success",title:"Success",message:"Deleted successfully",icon:"check"}))},href:`${A(r)}/${a}`,as:"button",className:"text-green-500 bg-gray-900/75 p-1 rounded ",children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e("path",{fillRule:"evenodd",d:"M16.704 4.153a.75.75 0 01.143 1.052l-8 10.5a.75.75 0 01-1.127.075l-4.5-4.5a.75.75 0 011.06-1.06l3.894 3.893 7.48-9.817a.75.75 0 011.05-.143z",clipRule:"evenodd"})})}),e("button",{className:"text-red-500 bg-gray-900/75 p-1 rounded",type:"button",onClick:n=>s(!l),children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5",children:e("path",{d:"M6.28 5.22a.75.75 0 00-1.06 1.06L8.94 10l-3.72 3.72a.75.75 0 101.06 1.06L10 11.06l3.72 3.72a.75.75 0 101.06-1.06L11.06 10l3.72-3.72a.75.75 0 00-1.06-1.06L10 8.94 6.28 5.22z"})})})]}):c(x,{children:[t&&e("button",{type:"button",onClick:n=>s(!l),children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-rose-600",children:e("path",{fillRule:"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z",clipRule:"evenodd"})})}),e(D,{type:"button",href:`${A(r)}/${a}/edit`,children:c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-gray-400",children:[e("path",{d:"M5.433 13.917l1.262-3.155A4 4 0 017.58 9.42l6.92-6.918a2.121 2.121 0 013 3l-6.92 6.918c-.383.383-.84.685-1.343.886l-3.154 1.262a.5.5 0 01-.65-.65z"}),e("path",{d:"M3.5 5.75c0-.69.56-1.25 1.25-1.25H10A.75.75 0 0010 3H4.75A2.75 2.75 0 002 5.75v9.5A2.75 2.75 0 004.75 18h9.5A2.75 2.75 0 0017 15.25V10a.75.75 0 00-1.5 0v5.25c0 .69-.56 1.25-1.25 1.25h-9.5c-.69 0-1.25-.56-1.25-1.25v-9.5z"})]})})]})})},Le=({children:a})=>e("div",{className:"flex space-x-4",children:a}),Fe=()=>{const{data:{columns:a,meta:t}}=h().props,{filteredData:r,handleSelected:l,selected:s}=b();return e("tbody",{className:"divide-y divide-gray-900",children:r&&r.map((n,i)=>c("tr",{className:"even:bg-gray-900/50",children:[t.allow.deletions&&e("td",{className:"p-3.5 w-5",children:e(V,{id:n.id,onChange:l,value:n.id,checked:s.includes(n.id)})}),a.displayable.map(d=>e("td",{className:"max-w-[200px] px-3.5 py-4 text-sm text-gray-500",children:e("div",{className:"line-clamp-2",children:n[d]})},`${d}-${i}`)),e("th",{className:"w-[70px] text-right px-3.5 py-4 text-sm ",children:e(Be,{id:n.id,deletion:t.allow.deletions})})]},`row-${i}`))})},ze=()=>{const{data:{records:a}}=h().props,{limit:t}=b();return e(x,{children:a.links.length>3&&e("nav",{className:"relative z-0 my-4 md:my-6 flex justify-center rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:a==null?void 0:a.links.map((r,l)=>e(D,{preserveScroll:!1,method:"get",href:r.url||"",disabled:r.active||!r.url,as:"button",data:{limit:t},className:`z-10 relative inline-flex items-center px-4 py-2 hover:bg-gray-900/10 text-sm font-medium border border-gray-700 disabled:cursor-not-allowed
          ${r.active?" bg-primary-500":" bg-gray-800"}
          `,dangerouslySetInnerHTML:{__html:r.label}},l.toString()))})})},qe=({categories:a})=>{const{data:{meta:{name_singular:t,name:r,allow:l},columns:s,database:n}}=h().props,{url:i}=h(),[d,u]=w.useState(!1),o=s.quick_create,S={};o.forEach(m=>{S[m]=""});const{data:g,setData:C,post:_,processing:L,errors:p,clearErrors:v,reset:f}=P({...S});function F(){u(!1),f(),v()}function Q(){u(!0)}const z=m=>{m.preventDefault(),C({...g,[m.target.name]:m.target.name==="slug"?le(m.target.value):m.target.value})},U=m=>{m.preventDefault(),v(),_(`${i}`,{onSuccess:()=>{F(),f()},onError:()=>{},preserveState:!0})};return c(x,{children:[e(re,{show:d,onClose:F,maxWidth:"lg",closeable:!0,children:c(q,{children:[e(q.Header,{heading:`Create a new ${t}`}),c("form",{onSubmit:U,className:"mt-4 space-y-6",children:[s.quick_create.map(m=>c("div",{children:[e(y,{htmlFor:m,value:M(m),className:"capitalize"}),m==="category_id"?e(ie,{id:"category_id",name:m,categories:a,defaultValue:g.category_id,onChange:z}):e(B,{id:m,name:m,className:"mt-1 block w-full",onChange:z,value:g[m]}),e(ce,{className:"mt-2",message:p[m]})]},se(m))),e("div",{children:e(N,{type:"submit",children:"Create"})})]})]})}),e("div",{className:"wrapper py-4 rounded bg-gray-800 my-4 md:my-6",children:c("div",{className:"flex justify-between",children:[e("h1",{className:"capitalize font-semibold text-2xl",children:r}),l.creation&&c(N,{type:"button",onClick:Q,children:["Create new ",t]})]})})]})},Oe=({order:a})=>e("div",{className:`pointer-events-none ${a==="asc"?"rotate-0":"rotate-180"}`,children:e("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 ",children:e("path",{fillRule:"evenodd",d:"M5.23 7.21a.75.75 0 011.06.02L10 11.168l3.71-3.938a.75.75 0 111.08 1.04l-4.25 4.5a.75.75 0 01-1.08 0l-4.25-4.5a.75.75 0 01.02-1.06z",clipRule:"evenodd"})})}),Ee=()=>{h();const{quickSearch:a,setQuickSearch:t}=b();return c("div",{className:"bg-gray-800 p-4 rounded my-4 md:my-6 space-y-4",children:[e(Pe,{}),c("div",{className:"grid grid-cols-12 gap-4 md:gap-x-6 lg:gap-x-8",children:[c("div",{className:"col-span-12 md:col-span-8 lg:col-span-10",children:[e(y,{className:"mb-1",htmlFor:"quick-search",children:"Quick Search"}),e(B,{type:"search",id:"quick-search",className:"w-full max-w-full",onChange:l=>{l.preventDefault(),t(l.target.value)},value:a})]}),e("div",{className:"col-span-12 md:col-span-4 lg:col-span-2",children:e(je,{})})]})]})},je=()=>{const{url:a}=h(),{limit:t,setLimit:r}=b();return c(x,{children:[e(y,{className:"mb-1",htmlFor:"display-limit",children:"Display Limit"}),c($,{onChange:s=>{r(s.target.value),j.get(`${a}`,{limit:s.target.value},{preserveState:!1})},id:"display-limit",name:"limit",className:"w-full max-w-full",value:t,children:[e("option",{value:"10",children:"10"}),e("option",{value:"25",children:"25"}),e("option",{value:"50",children:"50"}),e("option",{value:"100",children:"100"}),e("option",{value:"250",children:"250"})]})]})},Pe=()=>{const{url:a}=h(),{data:{columns:t}}=h().props,{limit:r}=b(),{data:l,setData:s,get:n,errors:i}=P({column:"id",operator:"equals",limit:r,value:""}),d=o=>{s({...l,[o.target.id]:o.target.value})};return c("form",{className:"grid grid-cols-12 gap-4 md:gap-x-6 lg:gap-x-8",onSubmit:o=>{o.preventDefault(),n(`${a}`,{preserveState:!1})},children:[c("div",{className:"col-span-12 md:col-span-6 lg:col-span-2",children:[e(y,{className:"mb-1",htmlFor:"column",children:"Filter column"}),e($,{id:"column",className:"w-full max-w-full",value:l.column,onChange:d,children:t.updatable.map(o=>e("option",{value:o,children:M(o)},o))})]}),c("div",{className:"col-span-12 md:col-span-6 lg:col-span-2",children:[e(y,{className:"mb-1",htmlFor:"operator",children:"Operator"}),c($,{id:"operator",className:"w-full max-w-full",value:l.operator,onChange:d,children:[e("option",{value:"equals",children:"Equals"}),e("option",{value:"contains",children:"Contains"}),e("option",{value:"starts_with",children:"Starts with"}),e("option",{value:"ends_with",children:"Ends with"}),e("option",{value:"greater_than",children:"Greater than"}),e("option",{value:"greater_or_equal_than",children:"Greater or equal than"}),e("option",{value:"less_than",children:"Less than"}),e("option",{value:"less_or_equal_than",children:"Less or equal than"})]})]}),c("div",{className:"col-span-12 md:col-span-8 flex flex-grow-0",children:[c("div",{className:"flex-1",children:[e(y,{className:"mb-1",htmlFor:"value",children:"Full Search"}),e(B,{type:"search",id:"value",className:"w-full max-w-full rounded-r-none",value:l.value,onChange:d})]}),e("div",{className:"flex items-end",children:e(N,{type:"submit",className:"min-h-[42px] rounded-l-none",children:"Search"})})]})]})},na=({auth:a,data:t,categories_all:r})=>c(ee,{user:a.user,header:e("h2",{className:"font-semibold text-xl text-gray-800 dark:text-gray-200 leading-tight capitalize",children:t.meta.name}),children:[e(R,{title:`Dashboard ${t.meta.name.capitalize()}`}),e("div",{className:"py-12",children:e("div",{className:"wrapper text-white",children:e($e,{data:t,categories_all:r})})})]});export{na as default};
